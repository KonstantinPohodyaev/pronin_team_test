# üí∞ Collect Service ‚Äî –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å–±–æ—Ä–æ–≤

![Django](https://img.shields.io/badge/Django-5.2.6-092E20?logo=django&logoColor=white)
![DRF](https://img.shields.io/badge/DRF-3.16.1-ff1709?logo=django)
![Celery](https://img.shields.io/badge/Celery-5.5.3-ff6600?logo=python)
![Redis](https://img.shields.io/badge/Redis-7.2-DC382D?logo=redis)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-17-4169E1?logo=postgresql)
![Python](https://img.shields.io/badge/Python-3.12-3776AB?logo=python)
![Docker](https://img.shields.io/badge/Docker-24.0-2496ED?logo=docker)
![Nginx](https://img.shields.io/badge/Nginx-1.27-009639?logo=nginx)

> üñ•Ô∏è –í–µ–±-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É—á–∞—Å—Ç–∏—è –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å–±–æ—Ä–∞—Ö.  
> –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω REST API —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–∏—Å–µ–º.

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üß© Backend (Django + DRF + Celery + Redis)
- üì° CRUD API –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–±–æ—Ä–æ–≤ –∏ –ø–ª–∞—Ç–µ–∂–µ–π
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT (SimpleJWT)
- üìä –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ GET-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (django-redis)
- ‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–±–æ—Ä–∞/–ø–ª–∞—Ç–µ–∂–∞ (Celery + Redis)
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `http://127.0.0.1/api/swagger/`
- üß† –õ–æ–≥–∏–∫–∞:
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º—ã –ø–ª–∞—Ç–µ–∂–∞ (–Ω–µ–ª—å–∑—è –ø—Ä–µ–≤—ã—Å–∏—Ç—å —Ü–µ–ª–µ–≤—É—é)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç —Ç–µ–∫—É—â–µ–π —Å—É–º–º—ã –∏ —á–∏—Å–ª–∞ –¥–æ–Ω–∞—Ç–æ—Ä–æ–≤
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ¬´–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö¬ª —Å–±–æ—Ä–æ–≤ –±–µ–∑ –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã
  - –û–±–ª–æ–∂–∫–∞ —Å–±–æ—Ä–∞ (ImageField, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ volume)

### ‚öôÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ DevOps
- üê≥ Docker + Docker Compose: —Å–µ—Ä–≤–∏—Å—ã (web, db, redis, celery, nginx)
- üåê Nginx: —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API
- üìÇ –û—Ç–¥–µ–ª—å–Ω—ã–µ volume –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ–¥–∏–∞
- üîí –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
git clone https://github.com/KonstantinPohodyaev/pronin_team_test.git
cd pronin_team_test
```

–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ:

```bash
python -m venv venv
source venv/bin/activate  # Windows: . venv\Scripts\activate
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

### üì¶ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# === Django Settings ===
DEBUG=1                        # –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏ (1 = –≤–∫–ª—é—á–µ–Ω–æ, 0 = –≤—ã–∫–ª—é—á–µ–Ω–æ)
SECRET_KEY=your_secret_key     # –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
ALLOWED_HOSTS=localhost,127.0.0.1,web  # –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ö–æ—Å—Ç—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

# === PostgreSQL Database ===
POSTGRES_DB=collect_db         # –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=collect_user     # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã
POSTGRES_PASSWORD=collect_pass # –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã
POSTGRES_PORT=5432             # –ü–æ—Ä—Ç PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5432)
POSTGRES_HOST=db               # –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–≤ docker-compose ‚Äî –∏–º—è —Å–µ—Ä–≤–∏—Å–∞)

# === Redis & Cache ===
REDIS_LOCATION=redis://redis:6379/1  # –ê–¥—Ä–µ—Å Redis –¥–ª—è –∫—ç—à–∞ (db=1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç Celery)

# === Celery & Broker ===
CELERY_BROKER_URL=redis://redis:6379/0       # Redis, –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (db=0)
CELERY_RESULT_BACKEND=redis://redis:6379/0   # Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
_–ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å Docker Desktop_

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
_–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —Å —Ñ–∞–π–ª–æ–º docker-compose.yml_

```bash
docker compose up -d
```
### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
docker compose exec -it web python manage.py migrate
```

### –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î –º–æ–∫–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```bash
docker compose exec -it web python manage.py full_db
```
- `--users <int>` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã.  
  _–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é_: **10**

- `--collects <int>` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–±–æ—Ä–æ–≤ (Collect), –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã.  
  _–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é_: **5**

- `--payments <int>` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π (Payment), –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã.  
  _–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é_: **50**
- `--flush` - –æ—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker compose down
```

_–°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ ```http://localhost```_

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**–ü–æ—Ö–æ–¥—è–µ–≤ –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω**  
Telegram: [@kspohodyaev](https://t.me/kspohodyaev)
